"""ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ´Ğ»Ñ ĞºĞ¾Ğ½ÑÑ‚Ñ€ÑƒĞºÑ‚Ğ¾Ñ€Ğ° Ğ¼ĞµĞ½Ñ."""

from typing import Any, Dict, List

# ĞšĞ»ÑÑ‡ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ² SystemSetting
MENU_LAYOUT_CONFIG_KEY = "menu_layout_config"

# Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ½Ñ
DEFAULT_MENU_CONFIG: Dict[str, Any] = {
    "version": 1,
    "rows": [
        {
            "id": "connect_row",
            "buttons": ["connect"],
            "conditions": {"has_active_subscription": True, "subscription_is_active": True},
            "max_per_row": 1,
        },
        {
            "id": "happ_row",
            "buttons": ["happ_download"],
            "conditions": {"has_active_subscription": True, "happ_enabled": True},
            "max_per_row": 1,
        },
        {
            "id": "subscription_traffic_row",
            "buttons": ["subscription", "buy_traffic"],
            "conditions": {"has_active_subscription": True},
            "max_per_row": 2,
        },
        {
            "id": "balance_row",
            "buttons": ["balance"],
            "conditions": None,
            "max_per_row": 1,
        },
        {
            "id": "trial_buy_row",
            "buttons": ["trial", "buy_subscription"],
            "conditions": None,
            "max_per_row": 2,
        },
        {
            "id": "simple_subscription_row",
            "buttons": ["simple_subscription"],
            "conditions": {"simple_subscription_enabled": True},
            "max_per_row": 1,
        },
        {
            "id": "resume_row",
            "buttons": ["resume_checkout"],
            "conditions": {"has_saved_cart": True},
            "max_per_row": 1,
        },
        {
            "id": "promo_referral_row",
            "buttons": ["promocode", "referrals"],
            "conditions": None,
            "max_per_row": 2,
        },
        {
            "id": "contests_row",
            "buttons": ["contests"],
            "conditions": {"contests_visible": True},
            "max_per_row": 2,
        },
        {
            "id": "support_info_row",
            "buttons": ["support", "info"],
            "conditions": None,
            "max_per_row": 2,
        },
        {
            "id": "language_row",
            "buttons": ["language"],
            "conditions": {"language_selection_enabled": True},
            "max_per_row": 2,
        },
        {
            "id": "admin_row",
            "buttons": ["admin_panel"],
            "conditions": {"is_admin": True},
            "max_per_row": 1,
        },
        {
            "id": "moderator_row",
            "buttons": ["moderator_panel"],
            "conditions": {"is_moderator": True},
            "max_per_row": 1,
        },
    ],
    "buttons": {
        "connect": {
            "type": "builtin",
            "builtin_id": "connect",
            "text": {"ru": "ğŸ”— ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ", "en": "ğŸ”— Connect"},
            "action": "subscription_connect",
            "enabled": True,
            "visibility": "subscribers",
            "conditions": {"has_active_subscription": True, "subscription_is_active": True},
            "dynamic_text": False,
            "open_mode": "callback",  # "callback" Ğ¸Ğ»Ğ¸ "direct"
            "webapp_url": None,  # URL Ğ´Ğ»Ñ Mini App Ğ¿Ñ€Ğ¸ open_mode="direct"
        },
        "happ_download": {
            "type": "builtin",
            "builtin_id": "happ_download",
            "text": {"ru": "â¬‡ï¸ Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Happ", "en": "â¬‡ï¸ Download Happ"},
            "action": "subscription_happ_download",
            "enabled": True,
            "visibility": "subscribers",
            "conditions": None,
            "dynamic_text": False,
        },
        "subscription": {
            "type": "builtin",
            "builtin_id": "subscription",
            "text": {"ru": "ğŸ“Š ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°", "en": "ğŸ“Š Subscription"},
            "action": "menu_subscription",
            "enabled": True,
            "visibility": "subscribers",
            "conditions": None,
            "dynamic_text": False,
        },
        "buy_traffic": {
            "type": "builtin",
            "builtin_id": "buy_traffic",
            "text": {"ru": "ğŸ“ˆ Ğ”Ğ¾ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "en": "ğŸ“ˆ Buy traffic"},
            "action": "buy_traffic",
            "enabled": True,
            "visibility": "subscribers",
            "conditions": {"has_traffic_limit": True, "traffic_topup_enabled": True},
            "dynamic_text": False,
        },
        "balance": {
            "type": "builtin",
            "builtin_id": "balance",
            "text": {"ru": "ğŸ’° Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: {balance}", "en": "ğŸ’° Balance: {balance}"},
            "action": "menu_balance",
            "enabled": True,
            "visibility": "all",
            "conditions": None,
            "dynamic_text": True,
        },
        "trial": {
            "type": "builtin",
            "builtin_id": "trial",
            "text": {"ru": "ğŸ ĞŸÑ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´", "en": "ğŸ Free trial"},
            "action": "menu_trial",
            "enabled": True,
            "visibility": "all",
            "conditions": {"show_trial": True},
            "dynamic_text": False,
        },
        "buy_subscription": {
            "type": "builtin",
            "builtin_id": "buy_subscription",
            "text": {"ru": "ğŸ›’ ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ", "en": "ğŸ›’ Buy subscription"},
            "action": "menu_buy",
            "enabled": True,
            "visibility": "all",
            "conditions": {"show_buy": True},
            "dynamic_text": False,
        },
        "simple_subscription": {
            "type": "builtin",
            "builtin_id": "simple_subscription",
            "text": {"ru": "ğŸ’³ ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°", "en": "ğŸ’³ Simple subscription"},
            "action": "simple_subscription_purchase",
            "enabled": True,
            "visibility": "all",
            "conditions": None,
            "dynamic_text": False,
        },
        "resume_checkout": {
            "type": "builtin",
            "builtin_id": "resume_checkout",
            "text": {"ru": "â†©ï¸ Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ", "en": "â†©ï¸ Resume checkout"},
            "action": "return_to_saved_cart",
            "enabled": True,
            "visibility": "all",
            "conditions": None,
            "dynamic_text": False,
        },
        "promocode": {
            "type": "builtin",
            "builtin_id": "promocode",
            "text": {"ru": "ğŸŸï¸ ĞŸÑ€Ğ¾Ğ¼Ğ¾ĞºĞ¾Ğ´", "en": "ğŸŸï¸ Promo code"},
            "action": "menu_promocode",
            "enabled": True,
            "visibility": "all",
            "conditions": None,
            "dynamic_text": False,
        },
        "referrals": {
            "type": "builtin",
            "builtin_id": "referrals",
            "text": {"ru": "ğŸ‘¥ Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹", "en": "ğŸ‘¥ Referrals"},
            "action": "menu_referrals",
            "enabled": True,
            "visibility": "all",
            "conditions": {"referral_enabled": True},
            "dynamic_text": False,
        },
        "contests": {
            "type": "builtin",
            "builtin_id": "contests",
            "text": {"ru": "ğŸ² ĞšĞ¾Ğ½ĞºÑƒÑ€ÑÑ‹", "en": "ğŸ² Contests"},
            "action": "contests_menu",
            "enabled": True,
            "visibility": "all",
            "conditions": None,
            "dynamic_text": False,
        },
        "support": {
            "type": "builtin",
            "builtin_id": "support",
            "text": {"ru": "ğŸ’¬ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°", "en": "ğŸ’¬ Support"},
            "action": "menu_support",
            "enabled": True,
            "visibility": "all",
            "conditions": {"support_enabled": True},
            "dynamic_text": False,
        },
        "info": {
            "type": "builtin",
            "builtin_id": "info",
            "text": {"ru": "â„¹ï¸ Ğ˜Ğ½Ñ„Ğ¾", "en": "â„¹ï¸ Info"},
            "action": "menu_info",
            "enabled": True,
            "visibility": "all",
            "conditions": None,
            "dynamic_text": False,
        },
        "language": {
            "type": "builtin",
            "builtin_id": "language",
            "text": {"ru": "ğŸŒ Ğ¯Ğ·Ñ‹Ğº", "en": "ğŸŒ Language"},
            "action": "menu_language",
            "enabled": True,
            "visibility": "all",
            "conditions": None,
            "dynamic_text": False,
        },
        "admin_panel": {
            "type": "builtin",
            "builtin_id": "admin_panel",
            "text": {"ru": "âš™ï¸ ĞĞ´Ğ¼Ğ¸Ğ½ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ", "en": "âš™ï¸ Admin panel"},
            "action": "admin_panel",
            "enabled": True,
            "visibility": "admins",
            "conditions": None,
            "dynamic_text": False,
        },
        "moderator_panel": {
            "type": "builtin",
            "builtin_id": "moderator_panel",
            "text": {"ru": "ğŸ§‘â€âš–ï¸ ĞœĞ¾Ğ´ĞµÑ€Ğ°Ñ†Ğ¸Ñ", "en": "ğŸ§‘â€âš–ï¸ Moderation"},
            "action": "moderator_panel",
            "enabled": True,
            "visibility": "moderators",
            "conditions": None,
            "dynamic_text": False,
        },
    },
}


# Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ñ… ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ñ… Ğ´Ğ»Ñ API
BUILTIN_BUTTONS_INFO: List[Dict[str, Any]] = [
    {
        "id": "connect",
        "default_text": {"ru": "ğŸ”— ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ", "en": "ğŸ”— Connect"},
        "callback_data": "subscription_connect",
        "default_conditions": {"has_active_subscription": True, "subscription_is_active": True},
        "supports_dynamic_text": False,
        "supports_direct_open": True,
    },
    {
        "id": "happ_download",
        "default_text": {"ru": "â¬‡ï¸ Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Happ", "en": "â¬‡ï¸ Download Happ"},
        "callback_data": "subscription_happ_download",
        "default_conditions": {"happ_enabled": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "subscription",
        "default_text": {"ru": "ğŸ“Š ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°", "en": "ğŸ“Š Subscription"},
        "callback_data": "menu_subscription",
        "default_conditions": {"has_active_subscription": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "buy_traffic",
        "default_text": {"ru": "ğŸ“ˆ Ğ”Ğ¾ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "en": "ğŸ“ˆ Buy traffic"},
        "callback_data": "buy_traffic",
        "default_conditions": {"has_traffic_limit": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "balance",
        "default_text": {"ru": "ğŸ’° Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: {balance}", "en": "ğŸ’° Balance: {balance}"},
        "callback_data": "menu_balance",
        "default_conditions": None,
        "supports_dynamic_text": True,
    },
    {
        "id": "trial",
        "default_text": {"ru": "ğŸ ĞŸÑ€Ğ¾Ğ±Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´", "en": "ğŸ Free trial"},
        "callback_data": "menu_trial",
        "default_conditions": {"show_trial": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "buy_subscription",
        "default_text": {"ru": "ğŸ›’ ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ", "en": "ğŸ›’ Buy subscription"},
        "callback_data": "menu_buy",
        "default_conditions": {"show_buy": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "simple_subscription",
        "default_text": {"ru": "ğŸ’³ ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°", "en": "ğŸ’³ Simple subscription"},
        "callback_data": "simple_subscription_purchase",
        "default_conditions": {"simple_subscription_enabled": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "resume_checkout",
        "default_text": {"ru": "â†©ï¸ Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ñ", "en": "â†©ï¸ Resume checkout"},
        "callback_data": "return_to_saved_cart",
        "default_conditions": {"has_saved_cart": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "promocode",
        "default_text": {"ru": "ğŸŸï¸ ĞŸÑ€Ğ¾Ğ¼Ğ¾ĞºĞ¾Ğ´", "en": "ğŸŸï¸ Promo code"},
        "callback_data": "menu_promocode",
        "default_conditions": None,
        "supports_dynamic_text": False,
    },
    {
        "id": "referrals",
        "default_text": {"ru": "ğŸ‘¥ Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹", "en": "ğŸ‘¥ Referrals"},
        "callback_data": "menu_referrals",
        "default_conditions": {"referral_enabled": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "contests",
        "default_text": {"ru": "ğŸ² ĞšĞ¾Ğ½ĞºÑƒÑ€ÑÑ‹", "en": "ğŸ² Contests"},
        "callback_data": "contests_menu",
        "default_conditions": {"contests_visible": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "support",
        "default_text": {"ru": "ğŸ’¬ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°", "en": "ğŸ’¬ Support"},
        "callback_data": "menu_support",
        "default_conditions": {"support_enabled": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "info",
        "default_text": {"ru": "â„¹ï¸ Ğ˜Ğ½Ñ„Ğ¾", "en": "â„¹ï¸ Info"},
        "callback_data": "menu_info",
        "default_conditions": None,
        "supports_dynamic_text": False,
    },
    {
        "id": "language",
        "default_text": {"ru": "ğŸŒ Ğ¯Ğ·Ñ‹Ğº", "en": "ğŸŒ Language"},
        "callback_data": "menu_language",
        "default_conditions": {"language_selection_enabled": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "admin_panel",
        "default_text": {"ru": "âš™ï¸ ĞĞ´Ğ¼Ğ¸Ğ½ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ", "en": "âš™ï¸ Admin panel"},
        "callback_data": "admin_panel",
        "default_conditions": {"is_admin": True},
        "supports_dynamic_text": False,
    },
    {
        "id": "moderator_panel",
        "default_text": {"ru": "ğŸ§‘â€âš–ï¸ ĞœĞ¾Ğ´ĞµÑ€Ğ°Ñ†Ğ¸Ñ", "en": "ğŸ§‘â€âš–ï¸ Moderation"},
        "callback_data": "moderator_panel",
        "default_conditions": {"is_moderator": True},
        "supports_dynamic_text": False,
    },
]


# Ğ’ÑĞµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ callback_data Ğ² Ğ±Ğ¾Ñ‚Ğµ (Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ñ… ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº)
AVAILABLE_CALLBACKS: List[Dict[str, Any]] = [
    # ĞœĞµĞ½Ñ
    {"callback_data": "back_to_menu", "name": "ĞĞ°Ğ·Ğ°Ğ´ Ğ² Ğ¼ĞµĞ½Ñ", "category": "menu", "icon": "â¬…ï¸",
     "text": {"ru": "â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´", "en": "â¬…ï¸ Back"}},
    {"callback_data": "menu_faq", "name": "FAQ", "category": "menu", "icon": "â“",
     "text": {"ru": "â“ FAQ", "en": "â“ FAQ"}},
    {"callback_data": "menu_info_promo_groups", "name": "ĞŸÑ€Ğ¾Ğ¼Ğ¾-Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹", "category": "menu", "icon": "ğŸ‘¥",
     "text": {"ru": "ğŸ‘¥ ĞŸÑ€Ğ¾Ğ¼Ğ¾-Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹", "en": "ğŸ‘¥ Promo groups"}},
    {"callback_data": "menu_privacy_policy", "name": "ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸", "category": "menu", "icon": "ğŸ”’",
     "text": {"ru": "ğŸ”’ ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸", "en": "ğŸ”’ Privacy Policy"}},
    {"callback_data": "menu_public_offer", "name": "ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¾Ñ„ĞµÑ€Ñ‚Ğ°", "category": "menu", "icon": "ğŸ“œ",
     "text": {"ru": "ğŸ“œ ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¾Ñ„ĞµÑ€Ñ‚Ğ°", "en": "ğŸ“œ Public Offer"}},
    {"callback_data": "menu_rules", "name": "ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°", "category": "menu", "icon": "ğŸ“‹",
     "text": {"ru": "ğŸ“‹ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°", "en": "ğŸ“‹ Rules"}},
    {"callback_data": "menu_server_status", "name": "Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²", "category": "menu", "icon": "ğŸ–¥ï¸",
     "text": {"ru": "ğŸ–¥ï¸ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ²", "en": "ğŸ–¥ï¸ Server Status"}},

    # Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ
    {"callback_data": "balance_history", "name": "Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°", "category": "balance", "icon": "ğŸ“œ",
     "text": {"ru": "ğŸ“œ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ", "en": "ğŸ“œ History"}},
    {"callback_data": "balance_topup", "name": "ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ", "category": "balance", "icon": "ğŸ’³",
     "text": {"ru": "ğŸ’³ ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ", "en": "ğŸ’³ Top up"}},

    # ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°
    {"callback_data": "subscription_extend", "name": "ĞŸÑ€Ğ¾Ğ´Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ", "category": "subscription", "icon": "ğŸ“…",
     "text": {"ru": "ğŸ“… ĞŸÑ€Ğ¾Ğ´Ğ»Ğ¸Ñ‚ÑŒ", "en": "ğŸ“… Extend"}, "requires_subscription": True},
    {"callback_data": "subscription_autopay", "name": "ĞĞ²Ñ‚Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶", "category": "subscription", "icon": "ğŸ”„",
     "text": {"ru": "ğŸ”„ ĞĞ²Ñ‚Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶", "en": "ğŸ”„ Autopay"}, "requires_subscription": True},
    {"callback_data": "subscription_settings", "name": "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸", "category": "subscription", "icon": "âš™ï¸",
     "text": {"ru": "âš™ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸", "en": "âš™ï¸ Settings"}, "requires_subscription": True},
    {"callback_data": "open_subscription_link", "name": "ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑÑÑ‹Ğ»ĞºÑƒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸", "category": "subscription", "icon": "ğŸ”—",
     "text": {"ru": "ğŸ”— ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑÑÑ‹Ğ»ĞºÑƒ", "en": "ğŸ”— Show link"}, "requires_subscription": True},
    {"callback_data": "subscription_add_countries", "name": "Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹", "category": "subscription", "icon": "ğŸŒ",
     "text": {"ru": "ğŸŒ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹", "en": "ğŸŒ Add countries"}, "requires_subscription": True},
    {"callback_data": "subscription_reset_traffic", "name": "Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "category": "subscription", "icon": "ğŸ”„",
     "text": {"ru": "ğŸ”„ Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "en": "ğŸ”„ Reset traffic"}, "requires_subscription": True},
    {"callback_data": "subscription_switch_traffic", "name": "ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "category": "subscription", "icon": "ğŸ”€",
     "text": {"ru": "ğŸ”€ ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "en": "ğŸ”€ Switch traffic"}, "requires_subscription": True},
    {"callback_data": "subscription_change_devices", "name": "Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°", "category": "subscription", "icon": "ğŸ“±",
     "text": {"ru": "ğŸ“± Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°", "en": "ğŸ“± Change devices"}, "requires_subscription": True},
    {"callback_data": "subscription_manage_devices", "name": "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸", "category": "subscription", "icon": "ğŸ“²",
     "text": {"ru": "ğŸ“² Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸", "en": "ğŸ“² Manage devices"}, "requires_subscription": True},
    {"callback_data": "subscription_upgrade", "name": "Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ", "category": "subscription", "icon": "â¬†ï¸",
     "text": {"ru": "â¬†ï¸ Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ", "en": "â¬†ï¸ Upgrade"}, "requires_subscription": True},

    # ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²
    {"callback_data": "device_guide_ios", "name": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ iOS", "category": "devices", "icon": "ğŸ“±",
     "text": {"ru": "ğŸ“± iOS", "en": "ğŸ“± iOS"}, "requires_subscription": True},
    {"callback_data": "device_guide_android", "name": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Android", "category": "devices", "icon": "ğŸ¤–",
     "text": {"ru": "ğŸ¤– Android", "en": "ğŸ¤– Android"}, "requires_subscription": True},
    {"callback_data": "device_guide_windows", "name": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Windows", "category": "devices", "icon": "ğŸ’»",
     "text": {"ru": "ğŸ’» Windows", "en": "ğŸ’» Windows"}, "requires_subscription": True},
    {"callback_data": "device_guide_mac", "name": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ macOS", "category": "devices", "icon": "ğŸ¯",
     "text": {"ru": "ğŸ¯ macOS", "en": "ğŸ¯ macOS"}, "requires_subscription": True},
    {"callback_data": "device_guide_tv", "name": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Android TV", "category": "devices", "icon": "ğŸ“º",
     "text": {"ru": "ğŸ“º Android TV", "en": "ğŸ“º Android TV"}, "requires_subscription": True},
    {"callback_data": "device_guide_appletv", "name": "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Apple TV", "category": "devices", "icon": "ğŸ“º",
     "text": {"ru": "ğŸ“º Apple TV", "en": "ğŸ“º Apple TV"}, "requires_subscription": True},

    # Happ
    {"callback_data": "happ_download_ios", "name": "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Happ iOS", "category": "happ", "icon": "ğŸ",
     "text": {"ru": "ğŸ iOS", "en": "ğŸ iOS"}},
    {"callback_data": "happ_download_android", "name": "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Happ Android", "category": "happ", "icon": "ğŸ¤–",
     "text": {"ru": "ğŸ¤– Android", "en": "ğŸ¤– Android"}},
    {"callback_data": "happ_download_macos", "name": "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Happ macOS", "category": "happ", "icon": "ğŸ–¥ï¸",
     "text": {"ru": "ğŸ–¥ï¸ macOS", "en": "ğŸ–¥ï¸ macOS"}},
    {"callback_data": "happ_download_windows", "name": "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Happ Windows", "category": "happ", "icon": "ğŸ’»",
     "text": {"ru": "ğŸ’» Windows", "en": "ğŸ’» Windows"}},

    # Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹
    {"callback_data": "referral_create_invite", "name": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ğ²Ğ°Ğ¹Ñ‚", "category": "referral", "icon": "âœ‰ï¸",
     "text": {"ru": "âœ‰ï¸ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ğ²Ğ°Ğ¹Ñ‚", "en": "âœ‰ï¸ Create invite"}},
    {"callback_data": "referral_show_qr", "name": "QR ĞºĞ¾Ğ´ Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ğ°", "category": "referral", "icon": "ğŸ“±",
     "text": {"ru": "ğŸ“± QR ĞºĞ¾Ğ´", "en": "ğŸ“± QR code"}},
    {"callback_data": "referral_list", "name": "Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ğ¾Ğ²", "category": "referral", "icon": "ğŸ‘¥",
     "text": {"ru": "ğŸ‘¥ ĞœĞ¾Ğ¸ Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹", "en": "ğŸ‘¥ My referrals"}},
    {"callback_data": "referral_analytics", "name": "ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ğ¾Ğ²", "category": "referral", "icon": "ğŸ“Š",
     "text": {"ru": "ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°", "en": "ğŸ“Š Analytics"}},

    # ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
    {"callback_data": "create_ticket", "name": "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ¸ĞºĞµÑ‚", "category": "support", "icon": "âœï¸",
     "text": {"ru": "âœï¸ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ¸ĞºĞµÑ‚", "en": "âœï¸ Create ticket"}},
    {"callback_data": "my_tickets", "name": "ĞœĞ¾Ğ¸ Ñ‚Ğ¸ĞºĞµÑ‚Ñ‹", "category": "support", "icon": "ğŸ“‹",
     "text": {"ru": "ğŸ“‹ ĞœĞ¾Ğ¸ Ñ‚Ğ¸ĞºĞµÑ‚Ñ‹", "en": "ğŸ“‹ My tickets"}},

    # Ğ¢Ñ€Ğ¸Ğ°Ğ»
    {"callback_data": "trial_activate", "name": "ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ñ€Ğ¸Ğ°Ğ»", "category": "trial", "icon": "ğŸ",
     "text": {"ru": "ğŸ ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ", "en": "ğŸ Activate"}},

    # ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ°
    {"callback_data": "clear_saved_cart", "name": "ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ", "category": "purchase", "icon": "ğŸ—‘ï¸",
     "text": {"ru": "ğŸ—‘ï¸ ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ", "en": "ğŸ—‘ï¸ Clear cart"}},
    {"callback_data": "subscription_confirm", "name": "ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºÑƒ", "category": "purchase", "icon": "âœ…",
     "text": {"ru": "âœ… ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ", "en": "âœ… Confirm"}},
    {"callback_data": "subscription_cancel", "name": "ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºÑƒ", "category": "purchase", "icon": "âŒ",
     "text": {"ru": "âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ", "en": "âŒ Cancel"}},
]

# Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ğ»ĞµĞ¹ÑÑ…Ğ¾Ğ»Ğ´ĞµÑ€Ñ‹ Ğ´Ğ»Ñ Ñ‚ĞµĞºÑÑ‚Ğ° ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº
DYNAMIC_PLACEHOLDERS: List[Dict[str, str]] = [
    {"placeholder": "{balance}", "description": "Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ", "example": "1 500 â‚½", "category": "user"},
    {"placeholder": "{username}", "description": "Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ", "example": "John", "category": "user"},
    {"placeholder": "{subscription_days}", "description": "Ğ”Ğ½ĞµĞ¹ Ğ´Ğ¾ Ğ¾ĞºĞ¾Ğ½Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸", "example": "14", "category": "subscription"},
    {"placeholder": "{traffic_used}", "description": "Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "example": "5.2 GB", "category": "subscription"},
    {"placeholder": "{traffic_left}", "description": "ĞÑÑ‚Ğ°Ğ²ÑˆĞ¸Ğ¹ÑÑ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº", "example": "94.8 GB", "category": "subscription"},
    {"placeholder": "{referral_count}", "description": "ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ğ¾Ğ²", "example": "12", "category": "referral"},
    {"placeholder": "{referral_earnings}", "description": "Ğ—Ğ°Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾Ğº Ñ Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ğ¾Ğ²", "example": "500 â‚½", "category": "referral"},
]
